<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Virtual development board: RoaLogic Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Virtual development board
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">RoaLogic Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="vdbComponent_1"></a>
Virtual development board components</h1>
<p>Virtual development board components are components which have a specific system functionality, for example a LED. Meaning that there is a output of the system that connects with a LED, that LED is then shown on the GUI to the user. To set this up there are two different base designs, one basic module to connect with the verilated design and a module to show the state on the GUI. This is split for two reasons, one is that it's possible to have a component which is not connected to the verilated design or not shown on the GUI. Second reason is that it's possible to change the UI framework without having to change each component, this also helps with the two different threads for the verilated design and the GUI.</p>
<p>All vdb components shall be placed in the vdb directory and have there own submap named vdb&lt;component name&gt;. All design files shall be added in this subdirectory, where the classes that connect with the verilated design are called vdb&lt;component name&gt;. Classes that show something on the GUI are named differently, &lt;UI framework&gt;vdb&lt;component name&gt;.</p>
<p>As example the LED, placed in subdirectory vdbLED. It has the system verilog design in vdbLED.sv and the C++ sources that connect with the verilated design, <a class="el" href="vdbLED_8hpp_source.html">vdbLED.hpp</a> and vdbLED.cpp. The LED implementation for wxWidgets is placed in the <a class="el" href="wxWidgetsVdbLED_8hpp_source.html">wxWidgetsVdbLED.hpp</a> and wxWidgetVdbLED.cpp.</p>
<h1><a class="anchor" id="vdbComponent_2"></a>
virtual development board component basic module</h1>
<p>The virtual development board basic module is the module that directly connects with the verilated design. This can be done in two ways, first is by a specific system verilog design component that uses DPI functions. Second method is by directly checking the design itself. Preferred is to use the DPI methodology, as this simplifies and enhances design speed.</p>
<p>Since the base of each virtual development board component is the same, a generic base class is designed, see <a class="el" href="classRoaLogic_1_1vdb_1_1cVDBCommon.html">RoaLogic::vdb::cVDBCommon</a>. This is a header only class implementation which holds everything needed to communicate with a verilated component. To link a vdb component with a verilated design component, the verilated scope is used. This scope must be given during construction of the class, see &lt;add ref&gt; for more information about the scope of a verilated design.</p>
<p>When a verilated component has an event, like the toggling of an IO pin, a specific DPI function is called. However this DPI function only knows the scope of the design and not the corresponding class scope. Because of this the vdb common component holds a few static functions to handle the mapping of the scope and the pointer of the vdb component. All vdb components and their scope are stored statically, which is automaticcaly done during class creation and destruction.</p>
<p>DPI functions must call the processVerilatorEvent() with the scope of the event and possible event data. It traverses all the components to find the related scope, when found it calls the virtual verilatorCallback() function. In this function it has changed the context and we are now inside the class of the vdb component with the related event data. Since the verilatorCallback() function is pure virtual the derived class determines the implementation of the vdb component.</p>
<dl class="section note"><dt>Note</dt><dd>DPI functions shall be placed within the *.cpp file of the corresponding implementation. In this way the DPI functions are private and are not called within the design.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Every DPI function must call the processVerilatorEvent() function so that the system can handle the event accordingly.</dd></dl>
<h1><a class="anchor" id="vdbComponent_3"></a>
virtual development board component UI common</h1>
<p>Each UI component shall implement the <a class="el" href="classRoaLogic_1_1GUI_1_1cGuiVDBComponent.html" title="GUI virtual development board component.">RoaLogic::GUI::cGuiVDBComponent</a> base class. In this class all the basics are implemented to directly communicate with the vdb common component, which is passed during construction. There are cases where the verilated component is not used, a nullptr can at that point be given and the class will handle it accordingly.</p>
<p>The VDB common component does not care about the UI implementation and abstracts it away. This abstraction is created by the observer pattern and by using a virtual function. Both serve a different use case, since the vdb component does not know anything about the UI implementation, but the UI implementation does know the vdb common component, it can call the virtual cppEvent() function. With this data from the UI can be passed into the verilated context, where each component can override the cppEvent() and implement it's implementation.</p>
<p>From the verilated context to the UI is slightly more complicated, especially since each UI framework uses a different event mechanism. Because of this every vdb component shall implement a CSubject, so that any UI component can register to it. Every vdb component can now notify the UI component, which at that point can notify the UI framework with it's own event handling.</p>
<dl class="section attention"><dt>Attention</dt><dd>Due that UI components shall be updated within there own thread, the observer of the vdb component must handle the context switch from the verilator thread to the UI thread.</dd></dl>
<h1><a class="anchor" id="vdbComponent_4"></a>
virtual development board existing components</h1>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Add and link the existing components</dd></dl>
<h1><a class="anchor" id="vdbComponent_5"></a>
virtual development board component creating a new one</h1>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Add description on how to create a new development board component</dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
